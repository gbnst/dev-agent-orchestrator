# GH-17 Web UI — Human Test Plan

Generated from test-requirements.md after automated coverage validation (19/19 PASS).

This plan covers acceptance criteria that require visual verification, responsive layout testing, or browser interaction that cannot be fully automated.

---

## Prerequisites

1. Build the project: `make build`
2. Start with web enabled: edit `config.yaml` to set `web.port: 8080`, then `make dev`
3. Create at least one container via the TUI
4. Open browser to `http://127.0.0.1:8080`

---

## Test 1: SPA Serves Correctly (GH-17-web-ui.AC5.4)

**Steps:**
1. Navigate to `http://127.0.0.1:8080/`
2. Verify the React SPA loads (container tree view visible)
3. Navigate to `http://127.0.0.1:8080/nonexistent-path`
4. Verify the SPA still loads (client-side routing fallback)

**Expected:** Both URLs serve the same SPA. No 404 page from the server.

---

## Test 2: Container Tree Layout (GH-17-web-ui.AC1.1, AC1.2)

**Steps:**
1. With at least one running container, verify the container list shows:
   - Container name
   - State (with color coding: green for running, red for stopped)
   - Template name
   - Project path
2. Click a container card to expand it
3. Verify sessions are listed underneath

**Expected:** All container metadata visible. Cards expand/collapse. Sessions listed when expanded.

---

## Test 3: Session CRUD via UI (GH-17-web-ui.AC2.1, AC2.2, AC2.3)

**Steps:**
1. Expand a running container card
2. Click "New Session" (or equivalent button)
3. Enter a session name and submit
4. Verify the new session appears in the list
5. Click the destroy/delete button on the session
6. Verify the session is removed from the list

**Expected:** Sessions can be created and destroyed through the UI. List updates after each action.

---

## Test 4: Terminal Attach and I/O (GH-17-web-ui.AC3.1, AC3.2, AC3.3)

**Steps:**
1. Create a session on a running container
2. Click "Attach" on the session
3. Verify terminal view opens with xterm.js rendering
4. Type `echo hello` and press Enter
5. Verify output appears in the terminal
6. Type `ls /` and verify directory listing appears

**Expected:** Terminal renders correctly. Keystrokes produce output. Shell prompt is responsive.

---

## Test 5: Terminal Resize (GH-17-web-ui.AC3.4)

**Steps:**
1. While attached to a terminal session
2. Resize the browser window (drag smaller, then larger)
3. Type `tput cols; tput lines` to check terminal dimensions
4. Verify dimensions change after resize

**Expected:** Terminal adapts to window size. `tput` reports updated dimensions.

---

## Test 6: Multiple Terminal Tabs (GH-17-web-ui.AC3.5)

**Steps:**
1. Create two sessions on the same container
2. Attach to the first session — terminal tab opens
3. Attach to the second session — second terminal tab opens
4. Switch between tabs by clicking tab headers
5. Verify each tab shows its own independent terminal

**Expected:** Tabs switch cleanly. Each terminal maintains its own state.

---

## Test 7: Disconnect Preserves Session (GH-17-web-ui.AC3.6)

**Steps:**
1. Attach to a terminal session
2. Type `echo "persistence test"` and press Enter
3. Close the terminal tab (or navigate back to container view)
4. Re-attach to the same session
5. Verify previous command output is still visible (scroll up if needed)

**Expected:** Session state is preserved. tmux session survives WebSocket disconnect.

---

## Test 8: Multiple Browser Tabs (GH-17-web-ui.AC3.7)

**Steps:**
1. Attach to a session in one browser tab
2. Open a second browser tab and attach to the same session
3. Type in the first tab
4. Verify output appears in the second tab

**Expected:** Both tabs show the same tmux session. Input in one tab appears in the other.

---

## Test 9: Responsive Layout — Mobile (GH-17-web-ui.AC4.1)

**Steps:**
1. Open browser DevTools and set viewport to 375×667 (iPhone SE)
2. Verify container cards stack vertically (single column)
3. Navigate to terminal view
4. Verify terminal tabs show as a dropdown/select (not horizontal tabs)
5. Verify terminal fills available width

**Expected:** Mobile layout is usable. No horizontal scrolling. Tabs accessible via dropdown.

---

## Test 10: Responsive Layout — Desktop (GH-17-web-ui.AC4.2)

**Steps:**
1. Set viewport to 1440×900 (standard desktop)
2. Verify container cards use available width appropriately
3. Navigate to terminal view
4. Verify terminal tabs show as horizontal tab bar
5. Verify terminal has comfortable dimensions

**Expected:** Desktop layout uses space efficiently. Horizontal tabs visible.

---

## Test 11: Catppuccin Theme (GH-17-web-ui.AC4.3)

**Steps:**
1. Verify the SPA uses Catppuccin Mocha dark theme colors
2. Check background is dark (`#1e1e2e` or similar)
3. Check text is light
4. Check terminal uses Catppuccin colors for syntax highlighting
5. Compare with TUI theme — both should feel consistent

**Expected:** Consistent dark theme throughout. Terminal colors match Catppuccin Mocha palette.

---

## Test 12: TUI Sync on Web Session Changes (GH-17-web-ui.AC2.4)

**Steps:**
1. Have both the TUI (terminal) and web UI open simultaneously
2. Create a session via the web UI
3. Check the TUI — session list should update
4. Destroy a session via the web UI
5. Check the TUI — session should be removed

**Expected:** TUI reflects session changes made through the web UI without manual refresh.

---

## Test 13: Server Disabled by Default (GH-17-web-ui.AC5.1)

**Steps:**
1. Start devagent with default config (no `web.port` set or `web.port: 0`)
2. Verify no HTTP server is listening (e.g., `curl http://127.0.0.1:8080` should fail)
3. Set `web.port: 8080` in config and restart
4. Verify HTTP server is now accessible

**Expected:** Web server only starts when explicitly configured with port > 0.
